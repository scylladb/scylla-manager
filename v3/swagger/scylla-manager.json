{
  "swagger": "2.0",
  "info": {
    "title": "Scylla Manager API",
    "version": "1.2.0"
  },
  "basePath": "/api/v1",
  "produces": [
    "application/json"
  ],
  "consumes": [
    "application/json"
  ],
  "definitions": {
    "Version": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string"
        }
      }
    },
    "Cluster": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "host": {
          "type": "string"
        },
        "port": {
          "type": "integer"
        },
        "auth_token": {
          "type": "string"
        },
        "username": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "alternator_access_key_id": {
          "type": "string"
        },
        "alternator_secret_access_key": {
          "type": "string"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "ssl_user_cert_file": {
          "type": "string",
          "format": "byte"
        },
        "ssl_user_key_file": {
          "type": "string",
          "format": "byte"
        },
        "without_repair": {
          "type": "boolean"
        },
        "force_tls_disabled": {
          "type": "boolean"
        },
        "force_non_ssl_session_port": {
          "type": "boolean"
        }
      }
    },
    "RepairUnit": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "tables": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "all_tables": {
          "type": "boolean"
        }
      }
    },
    "ClusterStatus": {
      "type": "array",
      "items": {
        "properties": {
          "dc": {
            "type": "string"
          },
          "host_id": {
            "type": "string"
          },
          "host": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "ssl": {
            "type": "boolean"
          },
          "alternator_status": {
            "type": "string"
          },
          "alternator_rtt_ms": {
            "type": "number",
            "format": "float"
          },
          "alternator_cause": {
            "type": "string"
          },
          "cql_status": {
            "type": "string"
          },
          "cql_rtt_ms": {
            "type": "number",
            "format": "float"
          },
          "cql_cause": {
            "type": "string"
          },
          "rest_status": {
            "type": "string"
          },
          "rest_rtt_ms": {
            "type": "number",
            "format": "float"
          },
          "rest_cause": {
            "type": "string"
          },
          "total_ram": {
            "type": "integer"
          },
          "uptime": {
            "type": "integer"
          },
          "cpu_count": {
            "type": "integer"
          },
          "scylla_version": {
            "type": "string"
          },
          "agent_version": {
            "type": "string"
          }
        }
      }
    },
    "RepairProgress": {
      "type": "object",
      "properties": {
        "success_percentage": {
          "type": "number",
          "format": "int"
        },
        "error_percentage": {
          "type": "number",
          "format": "int"
        },
        "token_ranges": {
          "type": "number",
          "format": "int"
        },
        "success": {
          "type": "number",
          "format": "int"
        },
        "error": {
          "type": "number",
          "format": "int"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "duration_ms": {
          "type": "integer"
        },
        "dcs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "host": {
          "type": "string"
        },
        "max_intensity": {
          "type": "number"
        },
        "intensity": {
          "type": "number"
        },
        "parallel": {
          "type": "integer"
        },
        "max_parallel": {
          "type": "integer"
        },
        "hosts": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "host": {
                "type": "string"
              },
              "tables": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/TableRepairProgress"
                }
              }
            }
          }
        },
        "tables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TableRepairProgress"
          }
        }
      }
    },
    "TableRepairProgress": {
      "properties": {
        "token_ranges": {
          "type": "number",
          "format": "int"
        },
        "success": {
          "type": "number",
          "format": "int"
        },
        "error": {
          "type": "number",
          "format": "int"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "duration_ms": {
          "type": "integer"
        },
        "keyspace": {
          "type": "string"
        },
        "table": {
          "type": "string"
        }
      }
    },
    "Schedule": {
      "type": "object",
      "properties": {
        "cron": {
          "type": "string"
        },
        "window": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "timezone": {
          "type": "string"
        },
        "start_date": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "interval": {
          "type": "string",
          "description": "This field is DEPRECATED. Use cron instead."
        },
        "num_retries": {
          "type": "number",
          "format": "int"
        },
        "retry_wait": {
          "type": "string"
        }
      }
    },
    "Task": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "This field is DEPRECATED. Use labels instead."
        },
        "enabled": {
          "type": "boolean"
        },
        "schedule": {
          "$ref": "#/definitions/Schedule"
        },
        "properties": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "TaskListItem": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "This field is DEPRECATED. Use labels instead."
        },
        "enabled": {
          "type": "boolean"
        },
        "schedule": {
          "$ref": "#/definitions/Schedule"
        },
        "properties": {
          "type": "object",
          "additionalProperties": true
        },
        "status": {
          "type": "string"
        },
        "success_count": {
          "type": "integer"
        },
        "error_count": {
          "type": "integer"
        },
        "last_success": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "last_error": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "suspended": {
          "type": "boolean"
        },
        "next_activation": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "retry": {
          "type": "integer"
        }
      }
    },
    "TaskUpdate": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "This field is DEPRECATED. Use labels instead."
        },
        "enabled": {
          "type": "boolean"
        },
        "schedule": {
          "$ref": "#/definitions/Schedule"
        },
        "properties": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "TaskRun": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "task_id": {
          "type": "string"
        },
        "id": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "cause": {
          "type": "string"
        },
        "start_time": {
          "type": "string",
          "format": "date-time"
        },
        "end_time": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "TaskRunRepairProgress": {
      "type": "object",
      "properties": {
        "run": {
          "$ref": "#/definitions/TaskRun"
        },
        "progress": {
          "$ref": "#/definitions/RepairProgress"
        }
      }
    },
    "RepairTarget": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "host": {
          "type": "string"
        },
        "ignore_hosts": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "dc": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "with_hosts": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "token_ranges": {
          "type": "string"
        },
        "units": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RepairUnit"
          }
        }
      }
    },
    "BackupListItem": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "task_id": {
          "type": "string"
        },
        "units": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BackupUnit"
          }
        },
        "snapshot_info": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/SnapshotInfo"
          }
        }
      }
    },
    "BackupFilesInfo": {
      "type": "object",
      "properties": {
        "location": {
          "type": "string"
        },
        "schema": {
          "type": "string"
        },
        "files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string"
              },
              "keyspace": {
                "type": "string"
              },
              "table": {
                "type": "string"
              },
              "version": {
                "type": "string"
              },
              "files": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "size": {
                "type": "integer"
              }
            }
          }
        }
      }
    },
    "BackupDescribeSchema": {
      "description": "Output of the backed up DESCRIBE SCHEMA WITH INTERNALS CQL query",
      "type": "object",
      "properties": {
        "schema": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BackupDescribeSchemaItem"
          }
        }
      }
    },
    "BackupDescribeSchemaItem": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "cql_stmt": {
          "type": "string"
        }
      }
    },
    "BackupTarget": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "host": {
          "type": "string"
        },
        "dc": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "with_hosts": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "location": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "retention": {
          "type": "integer"
        },
        "retention_days": {
          "type": "integer"
        },
        "rate_limit": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "snapshot_parallel": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "upload_parallel": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "units": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/BackupUnit"
          }
        },
        "size": {
          "type": "integer"
        }
      }
    },
    "BackupUnit": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "tables": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "all_tables": {
          "type": "boolean"
        }
      }
    },
    "RestoreTarget": {
      "type": "object",
      "properties": {
        "cluster_id": {
          "type": "string"
        },
        "location": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "snapshot_tag": {
          "type": "string"
        },
        "units": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreUnit"
          }
        },
        "size": {
          "type": "integer"
        },
        "views": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreView"
          }
        },
        "batch_size": {
          "type": "integer"
        },
        "parallel": {
          "type": "integer"
        },
        "transfers": {
          "type": "integer"
        },
        "rate_limit": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "allow_compaction": {
          "type": "boolean"
        },
        "unpin_agent_cpu": {
          "type": "boolean"
        }
      }
    },
    "RestoreUnit": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "tables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreTable"
          }
        }
      }
    },
    "RestoreView": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "view": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "base_table": {
          "type": "string"
        },
        "create_stmt": {
          "type": "string"
        }
      }
    },
    "RestoreTable": {
      "type": "object",
      "properties": {
        "table": {
          "type": "string"
        },
        "tombstone_gc": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        }
      }
    },
    "SnapshotInfo": {
      "type": "object",
      "properties": {
        "snapshot_tag": {
          "type": "string"
        },
        "nodes": {
          "type": "integer"
        },
        "size": {
          "type": "integer"
        }
      }
    },
    "TaskRunBackupProgress": {
      "type": "object",
      "properties": {
        "run": {
          "$ref": "#/definitions/TaskRun"
        },
        "progress": {
          "$ref": "#/definitions/BackupProgress"
        }
      }
    },
    "BackupProgress": {
      "type": "object",
      "properties": {
        "snapshot_tag": {
          "type": "string"
        },
        "dcs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "hosts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/HostProgress"
          }
        },
        "stage": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "uploaded": {
          "type": "integer"
        },
        "skipped": {
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "TaskRunRestoreProgress": {
      "type": "object",
      "properties": {
        "run": {
          "$ref": "#/definitions/TaskRun"
        },
        "progress": {
          "$ref": "#/definitions/RestoreProgress"
        }
      }
    },
    "RestoreProgress": {
      "type": "object",
      "properties": {
        "snapshot_tag": {
          "type": "string"
        },
        "keyspaces": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreKeyspaceProgress"
          }
        },
        "hosts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreHostProgress"
          }
        },
        "views": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreViewProgress"
          }
        },
        "stage": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "restored": {
          "type": "integer"
        },
        "downloaded": {
          "description": "This field is DEPRECATED. Total bytes downloaded from table (included in restored)",
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "repair_progress": {
          "$ref": "#/definitions/RepairProgress"
        }
      }
    },
    "HostProgress": {
      "type": "object",
      "properties": {
        "host": {
          "type": "string"
        },
        "keyspaces": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/KeyspaceProgress"
          }
        },
        "size": {
          "type": "integer"
        },
        "uploaded": {
          "type": "integer"
        },
        "skipped": {
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "KeyspaceProgress": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "tables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TableProgress"
          }
        },
        "size": {
          "type": "integer"
        },
        "uploaded": {
          "type": "integer"
        },
        "skipped": {
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "TableProgress": {
      "type": "object",
      "properties": {
        "table": {
          "type": "string"
        },
        "error": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "uploaded": {
          "type": "integer"
        },
        "skipped": {
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "RestoreViewProgress": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "view": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "base_table": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "create_stmt": {
          "type": "string"
        }
      }
    },
    "RestoreKeyspaceProgress": {
      "type": "object",
      "properties": {
        "keyspace": {
          "type": "string"
        },
        "tables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RestoreTableProgress"
          }
        },
        "size": {
          "type": "integer"
        },
        "restored": {
          "type": "integer"
        },
        "downloaded": {
          "description": "This field is DEPRECATED. Total bytes downloaded from table (included in restored)",
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "RestoreTableProgress": {
      "type": "object",
      "properties": {
        "table": {
          "type": "string"
        },
        "tombstone_gc": {
          "type": "string"
        },
        "error": {
          "type": "string"
        },
        "size": {
          "type": "integer"
        },
        "restored": {
          "type": "integer"
        },
        "downloaded": {
          "description": "This field is DEPRECATED. Total bytes downloaded from table (included in restored)",
          "type": "integer"
        },
        "failed": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "RestoreHostProgress": {
      "type": "object",
      "properties": {
        "host": {
          "type": "string"
        },
        "shard_cnt": {
          "description": "Host shard count",
          "type": "integer"
        },
        "restored_bytes": {
          "description": "Total bytes restored by host",
          "type": "integer"
        },
        "restore_duration": {
          "description": "Total time spent by host on restore in milliseconds",
          "type": "integer"
        },
        "downloaded_bytes": {
          "description": "Total bytes downloaded by host (included in restored_bytes)",
          "type": "integer"
        },
        "download_duration": {
          "description": "Total time spent by host on download in milliseconds (included in restore_duration)",
          "type": "integer"
        },
        "streamed_bytes": {
          "description": "Total bytes load&streamed by host (included in restored_bytes)",
          "type": "integer"
        },
        "stream_duration": {
          "description": "Total time spent by host on load&stream in milliseconds (included in restore_duration)",
          "type": "integer"
        }
      }
    },
    "TaskRunValidateBackupProgress": {
      "type": "object",
      "properties": {
        "run": {
          "$ref": "#/definitions/TaskRun"
        },
        "progress": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ValidateBackupProgress"
          }
        }
      }
    },
    "ValidateBackupProgress": {
      "type": "object",
      "properties": {
        "dc": {
          "type": "string"
        },
        "host": {
          "type": "string"
        },
        "location": {
          "type": "string"
        },
        "manifests": {
          "type": "integer"
        },
        "scanned_files": {
          "type": "integer"
        },
        "broken_snapshots": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "missing_files": {
          "type": "integer"
        },
        "orphaned_files": {
          "type": "integer"
        },
        "orphaned_bytes": {
          "type": "integer"
        },
        "deleted_files": {
          "type": "integer"
        },
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        }
      }
    },
    "TaskRunOne2OneRestoreProgress": {
      "type": "object",
      "properties": {
        "run": {
          "$ref": "#/definitions/TaskRun"
        },
        "progress": {
          "$ref": "#/definitions/One2OneRestoreProgress"
        }
      }
    },
    "One2OneRestoreProgress": {
      "type": "object",
      "properties": {
        "tables": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/One2OneRestoreTableProgress"
          }
        },
        "views": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/One2OneRestoreViewProgress"
          }
        }
      }
    },
    "One2OneRestoreTableProgress": {
      "type": "object",
      "properties": {
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "size": {
          "type": "integer"
        },
        "restored": {
          "type": "integer"
        },
        "status": {
          "type": "string",
          "enum": [
            "not_started",
            "in_progress",
            "done",
            "failed"
          ]
        },
        "keyspace": {
          "type": "string"
        },
        "table": {
          "type": "string"
        }
      }
    },
    "One2OneRestoreViewProgress": {
      "type": "object",
      "properties": {
        "started_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "completed_at": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "size": {
          "type": "integer"
        },
        "restored": {
          "type": "integer"
        },
        "status": {
          "type": "string",
          "enum": [
            "not_started",
            "in_progress",
            "done",
            "failed"
          ]
        },
        "keyspace": {
          "type": "string"
        },
        "table": {
          "type": "string"
        },
        "view": {
          "type": "string"
        },
        "view_type": {
          "type": "string"
        }
      }
    },
    "Suspended": {
      "type": "boolean"
    },
    "SuspendDetails": {
      "type": "object",
      "properties": {
        "suspended": {
          "type": "boolean"
        },
        "allow_task_type": {
          "type": "string"
        }
      }
    },
    "ErrorResponse": {
      "type": "object",
      "properties": {
        "details": {
          "description": "Human readable description",
          "type": "string"
        },
        "message": {
          "description": "Error description",
          "type": "string"
        },
        "trace_id": {
          "description": "Request ID for tracing in logs",
          "type": "string"
        }
      }
    }
  },
  "paths": {
    "/version": {
      "get": {
        "responses": {
          "200": {
            "description": "Server version",
            "schema": {
              "$ref": "#/definitions/Version"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/clusters": {
      "get": {
        "responses": {
          "200": {
            "description": "List of all clusters",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Cluster"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "post": {
        "parameters": [
          {
            "name": "cluster",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/Cluster"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Cluster added",
            "headers": {
              "Location": {
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "Cluster info",
            "schema": {
              "$ref": "#/definitions/Cluster"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "put": {
        "parameters": [
          {
            "name": "cluster",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/Cluster"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated cluster info",
            "schema": {
              "$ref": "#/definitions/Cluster"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "parameters": [
          {
            "type": "boolean",
            "name": "cql_creds",
            "in": "query"
          },
          {
            "type": "boolean",
            "name": "alternator_creds",
            "in": "query"
          },
          {
            "type": "boolean",
            "name": "ssl_user_cert",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Cluster deleted"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/status": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Cluster hosts and their statuses",
            "schema": {
              "$ref": "#/definitions/ClusterStatus"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/tasks": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "parameters": [
          {
            "name": "all",
            "in": "query",
            "type": "boolean",
            "required": false
          },
          {
            "name": "type",
            "in": "query",
            "type": "string",
            "required": false
          },
          {
            "name": "status",
            "in": "query",
            "type": "string",
            "required": false
          },
          {
            "name": "short",
            "in": "query",
            "type": "boolean",
            "required": false
          },
          {
            "name": "task_id",
            "in": "query",
            "type": "string",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "List of tasks",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TaskListItem"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "post": {
        "parameters": [
          {
            "name": "taskFields",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/TaskUpdate"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Task added",
            "headers": {
              "Location": {
                "type": "string"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/tasks/repair/target": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "parameters": [
          {
            "name": "taskFields",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/TaskUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repair target",
            "schema": {
              "$ref": "#/definitions/RepairTarget"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/tasks/backup/target": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "parameters": [
          {
            "name": "taskFields",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/TaskUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Backup target",
            "schema": {
              "$ref": "#/definitions/BackupTarget"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/tasks/restore/target": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "parameters": [
          {
            "name": "taskFields",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/TaskUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Restore target",
            "schema": {
              "$ref": "#/definitions/RestoreTarget"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/{task_type}/{task_id}": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_type",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "Task info",
            "schema": {
              "$ref": "#/definitions/Task"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "put": {
        "parameters": [
          {
            "name": "taskFields",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/TaskUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Updated task info",
            "schema": {
              "$ref": "#/definitions/Task"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "responses": {
          "200": {
            "description": "Task deleted"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/{task_type}/{task_id}/start": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_type",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_id",
          "in": "path",
          "required": true
        },
        {
          "type": "boolean",
          "name": "continue",
          "in": "query",
          "required": true
        },
        {
          "type": "boolean",
          "name": "enable",
          "in": "query",
          "required": true,
          "description": "Enable the task if it was disabled"
        },
        {
          "type": "boolean",
          "name": "soft",
          "in": "query",
          "required": true,
          "description": "The task will be started only if its last run hasn't finished successfully, or if it finished successfully but missed its next scheduled activation"
        }
      ],
      "put": {
        "responses": {
          "200": {
            "description": "Task started"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/{task_type}/{task_id}/stop": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_type",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_id",
          "in": "path",
          "required": true
        },
        {
          "type": "boolean",
          "name": "disable",
          "in": "query",
          "required": false
        }
      ],
      "put": {
        "responses": {
          "200": {
            "description": "Task stopped"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/{task_type}/{task_id}/history": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_type",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "task_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "type": "integer",
            "format": "int",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "List of task runs",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/TaskRun"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/repair/{task_id}/{run_id}": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "task_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "run_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Repair progress",
            "schema": {
              "$ref": "#/definitions/TaskRunRepairProgress"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/backup/{task_id}/{run_id}": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "task_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "run_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Backup progress",
            "schema": {
              "$ref": "#/definitions/TaskRunBackupProgress"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/restore/{task_id}/{run_id}": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "task_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "run_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Restore progress",
            "schema": {
              "$ref": "#/definitions/TaskRunRestoreProgress"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/validate_backup/{task_id}/{run_id}": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "task_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "run_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Backup validation progress",
            "schema": {
              "$ref": "#/definitions/TaskRunValidateBackupProgress"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/task/1_1_restore/{task_id}/{run_id}": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "task_id",
            "in": "path",
            "required": true
          },
          {
            "type": "string",
            "name": "run_id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "1-1-restore progress",
            "schema": {
              "$ref": "#/definitions/TaskRunOne2OneRestoreProgress"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/backups": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            },
            "name": "locations",
            "in": "query"
          },
          {
            "type": "string",
            "name": "query_cluster_id",
            "in": "query"
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            },
            "name": "keyspace",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "format": "date-time",
            "name": "min_date",
            "in": "query"
          },
          {
            "type": "string",
            "format": "date-time",
            "name": "max_date",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Backup list",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BackupListItem"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "delete": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            },
            "name": "snapshot_tags",
            "in": "query",
            "required": true
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            },
            "name": "locations",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/backups/files": {
      "get": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            },
            "name": "keyspace",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "name": "snapshot_tag",
            "in": "query",
            "required": true
          },
          {
            "type": "array",
            "items": {
              "type": "string"
            },
            "name": "locations",
            "in": "query"
          },
          {
            "type": "string",
            "name": "query_cluster_id",
            "in": "query"
          }
        ],
        "responses": {
          "200": {
            "description": "Backup list",
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/BackupFilesInfo"
              }
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/backups/schema": {
      "get": {
        "parameters": [
          {
            "description": "ID of the cluster which will fetch backed up schema",
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "description": "Snapshot tag of the backup which schema will be fetched",
            "type": "string",
            "name": "snapshot_tag",
            "in": "query",
            "required": true
          },
          {
            "description": "Location of the backup which schema will be fetched. In case of a multi-location backup, any location can be specified",
            "type": "string",
            "name": "location",
            "in": "query",
            "required": true
          },
          {
            "description": "ID of the cluster which backed up schema will be fetched. Used for filtering purposes",
            "type": "string",
            "name": "query_cluster_id",
            "in": "query",
            "required": false
          },
          {
            "description": "ID of the task which backed up schema. Used for filtering purposes",
            "type": "string",
            "name": "query_task_id",
            "in": "query",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "Described schema",
            "schema": {
              "$ref": "#/definitions/BackupDescribeSchema"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/repairs/intensity": {
      "put": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "number",
            "name": "intensity",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/repairs/parallel": {
      "put": {
        "parameters": [
          {
            "type": "string",
            "name": "cluster_id",
            "in": "path",
            "required": true
          },
          {
            "type": "integer",
            "name": "parallel",
            "in": "query",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/Suspended"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/suspended": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/Suspended"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      },
      "put": {
        "parameters": [
          {
            "name": "suspended",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/Suspended"
            }
          },
          {
            "type": "boolean",
            "name": "start_tasks",
            "in": "query",
            "required": true
          },
          {
            "type": "string",
            "name": "allow_task_type",
            "in": "query",
            "required": false
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    },
    "/cluster/{cluster_id}/suspended/details": {
      "parameters": [
        {
          "type": "string",
          "name": "cluster_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/SuspendDetails"
            }
          },
          "default": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorResponse"
            }
          }
        }
      }
    }
  }
}
