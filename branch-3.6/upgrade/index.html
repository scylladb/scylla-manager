

<!DOCTYPE html>
<html class="no-js" lang="en" style="visibility: hidden;">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             ScyllaDB Manager Upgrade | ScyllaDB Docs 
        </title>
        <meta name="description" content="ScyllaDB is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../_static/img/favicon-228x228.png" />

        
            
        

        
            
            <link rel="canonical" href="https://manager.docs.scylladb.com/stable/upgrade/"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>

        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.css">
        <script type="module" src="https://cdn.jsdelivr.net/npm/biel-search@latest/dist/biel-search/biel-search.esm.js"></script>
        
        
        
            
                <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/css/main.css?v=e3ce25dc" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/sphinx_collapse.css?v=226d88b4" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
            
        
    
        
        
            
        <script type="text/javascript" src="../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../_static/js/main.bundle.js"></script>
        
            
                <script src="../_static/documentation_options.js?v=5929fcd5"></script>
            
        
            
                <script src="../_static/doctools.js?v=9a2dae69"></script>
            
        
            
                <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
            
        
            
                <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
            
        
            
                <script src="../_static/copybutton.js?v=f281be69"></script>
            
        
            
                <script src="../_static/tabs.js?v=3030b3cb"></script>
            
        
    
            
                <meta name='zd-site-verification' content='jiigc536se3g139312rad' />
            
            
                <!-- Google Tag Manager docs -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-54NWVS4");
</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager global -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
            
        
    </head>

    <body class="brand-product">
        <section class="promo-banner  promo-banner--hide" style="display: none;">
    <div class="promo-banner-wrapper">
        
        <div class="promo-banner__title">ScyllaDB University Live | Free Virtual Training Event</div>
        <a class="promo-banner__button button button--reverse" href="#"
           target="_blank" rel="noopener noreferrer">Learn more</a>
        <button class="promo-banner__close">
            <i class="icon-cancel"></i>
        </button>
    </div>
</section>
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../_static/img/scylladb-logo-horizontal.svg" alt="ScyllaDB Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Deployments <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="icon-docs-cloud"></i>Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/">
                            <i class="icon-server"></i>Server</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="icon-docs-manager"></i>ScyllaDB Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="icon-docs-monitoring"></i>ScyllaDB
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="icon-docs-operator"></i>ScyllaDB Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/cql-drivers/">
                            <i class="icon-docs-nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/manual/stable/using-scylla/drivers/dynamo-drivers/">
                            <i class="icon-docs-alternator"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Resources
                    <i class="chevron icon-arrow-dropdown"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://university.scylladb.com">
                            <i class="icon-university"></i>
                            ScyllaDB University
                        </a>
                    </li>
                    <li>
                        <a href="https://forum.scylladb.com">
                            <i class="icon-docs-community"></i>
                            Community Forum
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html">
                            <i class="icon-docs-training"></i>
                            Tutorials
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://docs.scylladb.com/manual/stable/getting-started/installation-common/scylla-web-installer.html" class="button"><i class="icon-download me-2"></i> Install</a>
        </div>
    </div>
    <div class="header-search-box">
        <i class="dark-theme-toggler icon-theme"></i>
        <div class="search-box">
            <ci-search></ci-search>
        </div>
        
            <biel-button class="header-ask-ai" project="ddfdo8m94k" 
                header-title="ScyllaDB chatbot (beta)"
                button-position="default"
                modal-position="bottom-right"
                button-style="dark">
                Ask AI
            </biel-button>
        
    </div>
    <div class="side-nav-toggle">
    <i class="dark-theme-toggler icon-theme"></i>
    <div class="side-nav-toggle__button" data-toggle="side-nav">
        <i class="icon-menu"></i>
    </div>
</div>
</header>
        <div class="title"></div>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://docs.scylladb.com"
           class="bread__highlight">
            <i class="icon-home"></i> ScyllaDB Docs
        </a>
    </span>
    <span class="bread__item">
        <a href="../index.html"
           class="bread__highlight">
            Scylla Manager
        </a>
    </span>
    
    <span class="bread__item bread__item--last">ScyllaDB Manager Upgrade</span>
</div>
                    </div>
                
                
                <div class="sidebar-right-layout">
                    <div class="body-container">
                

                    <div class="content-body">
                        
                            
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Manager.
            
            <a href="../../stable/upgrade/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                        
                        
                        <section id="scylladb-manager-upgrade">
<h1>ScyllaDB Manager Upgrade<a class="headerlink" href="#scylladb-manager-upgrade" title="Link to this heading">¶</a></h1>
<p>This document describes the upgrade process between two versions of ScyllaDB Manager.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See <a class="reference internal" href="../compatibility-matrix.html"><span class="doc">Compatibility Matrix</span></a> for information about compatibility between ScyllaDB Manager and ScyllaDB versions.</p>
</div>
<section id="applicable-platforms">
<h2>Applicable platforms<a class="headerlink" href="#applicable-platforms" title="Link to this heading">¶</a></h2>
<p>This guide covers the general steps for upgrading ScyllaDB Manager between any two versions on the following platforms:</p>
<ul class="simple">
<li><p>Red Hat Enterprise Linux, versions 7 and 8</p></li>
<li><p>Debian, versions 10 and 11</p></li>
<li><p>Ubuntu, versions 18.04, 20.04, 22.04</p></li>
</ul>
</section>
<section id="upgrade-procedure">
<h2>Upgrade Procedure<a class="headerlink" href="#upgrade-procedure" title="Link to this heading">¶</a></h2>
<p>Upgrade procedure for the Scylla Manager includes upgrade of three components server, client, and the agent. Entire cluster shutdown is NOT needed. ScyllaDB will be running while the manager components are upgraded. Overview of the required steps:</p>
<ul class="simple">
<li><p>Stop all ScyllaDB Manager tasks (or wait for them to finish)</p></li>
<li><p>Stop the ScyllaDB Manager Server</p></li>
<li><p>Stop the ScyllaDB Manager Agent on all nodes</p></li>
<li><p>Upgrade the ScyllaDB Manager Server and Client</p></li>
<li><p>Upgrade the ScyllaDB Manager Agent on all nodes</p></li>
<li><p>Run <cite>scyllamgr_agent_setup</cite> script on all nodes</p></li>
<li><p>Reconcile configuration files</p></li>
<li><p>Start the upgraded ScyllaDB Manager Agent on all nodes</p></li>
<li><p>Start the upgraded ScyllaDB Manager Server</p></li>
<li><p>Validate status of the cluster</p></li>
</ul>
</section>
<section id="upgrade-steps">
<h2>Upgrade steps<a class="headerlink" href="#upgrade-steps" title="Link to this heading">¶</a></h2>
<section id="stop-all-scylladb-manager-tasks-or-wait-for-them-to-finish">
<h3>Stop all ScyllaDB Manager tasks (or wait for them to finish)<a class="headerlink" href="#stop-all-scylladb-manager-tasks-or-wait-for-them-to-finish" title="Link to this heading">¶</a></h3>
<p><strong>On the Manager Server</strong> check current status of the manager tasks:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool<span class="w"> </span>tasks<span class="w"> </span>-c<span class="w"> </span>&lt;cluster&gt;
</pre></div>
</div>
<p>None of the listed tasks should have status in RUNNING.</p>
</section>
<section id="stop-the-scylladb-manager-server">
<h3>Stop the ScyllaDB Manager Server<a class="headerlink" href="#stop-the-scylladb-manager-server" title="Link to this heading">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct Systemd to stop the server process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>scylla-manager
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>scylla-manager
</pre></div>
</div>
<p>It should have a status of <em>“Active: inactive (dead)”</em>.</p>
</section>
<section id="stop-the-scylladb-manager-agent-on-all-nodes">
<h3>Stop the ScyllaDB Manager Agent on all nodes<a class="headerlink" href="#stop-the-scylladb-manager-agent-on-all-nodes" title="Link to this heading">¶</a></h3>
<p><strong>On each ScyllaDB node</strong> in the cluster run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>scylla-manager-agent
</pre></div>
</div>
<p>Ensure that it is stopped with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>scylla-manager-agent
</pre></div>
</div>
<p>It should have a status of <em>“Active: inactive (dead)”</em>.</p>
</section>
<section id="upgrade-the-scylladb-manager-server-and-client">
<h3>Upgrade the ScyllaDB Manager Server and Client<a class="headerlink" href="#upgrade-the-scylladb-manager-server-and-client" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p><strong>On the Manager server</strong>, update the Manager repo file. Go to ScyllaDB Manager in
the <a class="reference external" href="https://www.scylladb.com/download/#manager">ScyllaDB Download Center</a>,
and select your platform and the version to which you want to upgrade to display the relevant command.</p>
<p>The following examples show how to update the repo for Manager 3.6:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-RXhhbXBsZSBmb3IgQ2VudG9z" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-RXhhbXBsZSBmb3IgQ2VudG9z" name="RXhhbXBsZSBmb3IgQ2VudG9z" role="tab" tabindex="0">Example for Centos</button><button aria-controls="panel-0-RXhhbXBsZSBmb3IgVWJ1bnR1" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-RXhhbXBsZSBmb3IgVWJ1bnR1" name="RXhhbXBsZSBmb3IgVWJ1bnR1" role="tab" tabindex="-1">Example for Ubuntu</button></div><div aria-labelledby="tab-0-RXhhbXBsZSBmb3IgQ2VudG9z" class="sphinx-tabs-panel group-tab" id="panel-0-RXhhbXBsZSBmb3IgQ2VudG9z" name="RXhhbXBsZSBmb3IgQ2VudG9z" role="tabpanel" tabindex="0"><div class="hide-copy-button highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo curl -o /etc/yum.repos.d/scylla-manager.repo -L https://downloads.scylladb.com/rpm/centos/scylladb-manager-3.6.repo</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-RXhhbXBsZSBmb3IgVWJ1bnR1" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-RXhhbXBsZSBmb3IgVWJ1bnR1" name="RXhhbXBsZSBmb3IgVWJ1bnR1" role="tabpanel" tabindex="0"><div class="hide-copy-button highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo wget -O /etc/apt/sources.list.d/scylla-manager.list https://downloads.scylladb.com/deb/ubuntu/scylladb-manager-3.6.list</span>
</pre></div>
</div>
</div></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You don’t need to update the repo file if you upgrade to a patch release, for example,
from Manager 3.5.0 to 3.5.1.</p>
</div>
<p>You can display the contents of the Manager repo file to confirm that the displayed version
is the ver#4487sion to which you want to upgrade.</p>
<blockquote>
<div><ul class="simple">
<li><p>On CentOS/Red Hat, run: <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/etc/yum.repos.d/scylla-manager.repo</span></code></p></li>
<li><p>On Debian/Ubuntu, run: <code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">/etc/apt/sources.list.d/scylla-manager.list</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>On the Manager server</strong>, instruct the package manager to update the server and the client:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Q2VudE9TLyBSZWQgSGF0" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-Q2VudE9TLyBSZWQgSGF0" name="Q2VudE9TLyBSZWQgSGF0" role="tab" tabindex="0">CentOS/ Red Hat</button><button aria-controls="panel-1-RGViaWFuLyBVYnVudHU=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-RGViaWFuLyBVYnVudHU=" name="RGViaWFuLyBVYnVudHU=" role="tab" tabindex="-1">Debian/ Ubuntu</button></div><div aria-labelledby="tab-1-Q2VudE9TLyBSZWQgSGF0" class="sphinx-tabs-panel group-tab" id="panel-1-Q2VudE9TLyBSZWQgSGF0" name="Q2VudE9TLyBSZWQgSGF0" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo yum update scylla-manager-server scylla-manager-client -y</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-RGViaWFuLyBVYnVudHU=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-RGViaWFuLyBVYnVudHU=" name="RGViaWFuLyBVYnVudHU=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt-get update</span>
<span class="go">sudo apt-get install scylla-manager-server scylla-manager-client -y</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using apt-get, if a previous version of the ScyllaDB Manager package had a modified configuration file, you will be asked what to do with this file during the installation process. In order to keep both files for reconciliation (covered later in the procedure), select the “keep your currently-installed version” option when prompted.</p>
</div>
</div></div>
</li>
</ol>
</section>
<section id="upgrade-the-scylladb-manager-agent-on-all-nodes">
<h3>Upgrade the ScyllaDB Manager Agent on all nodes<a class="headerlink" href="#upgrade-the-scylladb-manager-agent-on-all-nodes" title="Link to this heading">¶</a></h3>
<p><strong>On each ScyllaDB node</strong> instruct package manager to update the agent:</p>
<p>CentOS, Red Hat:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>yum<span class="w"> </span>update<span class="w"> </span>scylla-manager-agent<span class="w"> </span>-y
</pre></div>
</div>
<p>Debian, Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>scylla-manager-agent<span class="w"> </span>-y
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With apt-get, if a previous version of the package had a modified configuration file, you will be asked during installation what to do with it. Please select “keep your currently-installed version” option to keep both previous and new default configuration file for later reconciliation.</p>
</div>
</section>
<section id="run-scyllamgr-agent-setup-script-on-all-nodes">
<h3>Run <cite>scyllamgr_agent_setup</cite> script on all nodes<a class="headerlink" href="#run-scyllamgr-agent-setup-script-on-all-nodes" title="Link to this heading">¶</a></h3>
<p>This step requires sudo rights:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sudo<span class="w"> </span>scyllamgr_agent_setup
Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>scylla-helper.slice<span class="w"> </span><span class="k">if</span><span class="w"> </span>it<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>exist?
Yes<span class="w"> </span>-<span class="w"> </span>limit<span class="w"> </span>ScyllaDB<span class="w"> </span>Manager<span class="w"> </span>Agent<span class="w"> </span>and<span class="w"> </span>other<span class="w"> </span>helper<span class="w"> </span>programs<span class="w"> </span>memory.<span class="w"> </span>No<span class="w"> </span>-<span class="w"> </span>skip<span class="w"> </span>this<span class="w"> </span>step.
<span class="o">[</span>YES/no<span class="o">]</span><span class="w"> </span>YES
Do<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>the<span class="w"> </span>ScyllaDB<span class="w"> </span>Manager<span class="w"> </span>Agent<span class="w"> </span>service<span class="w"> </span>to<span class="w"> </span>automatically<span class="w"> </span>start<span class="w"> </span>when<span class="w"> </span>the<span class="w"> </span>node<span class="w"> </span>boots?
Yes<span class="w"> </span>-<span class="w"> </span>automatically<span class="w"> </span>start<span class="w"> </span>ScyllaDB<span class="w"> </span>Manager<span class="w"> </span>Agent<span class="w"> </span>when<span class="w"> </span>the<span class="w"> </span>node<span class="w"> </span>boots.<span class="w"> </span>No<span class="w"> </span>-<span class="w"> </span>skip<span class="w"> </span>this<span class="w"> </span>step.
<span class="o">[</span>YES/no<span class="o">]</span><span class="w"> </span>YES
</pre></div>
</div>
<p>First step relates to limiting resources that are available to the agent and second
instructs systemd to run agent on node restart.</p>
</section>
<section id="reconcile-configuration-files">
<h3>Reconcile configuration files<a class="headerlink" href="#reconcile-configuration-files" title="Link to this heading">¶</a></h3>
<p>Upgrades can create changes to the structure and values of the default yaml configuration file. If the previous version’s configuration file was modified with custom values, this could result in a conflict. The upgrade procedure can’t resolve this without help from an administrator. If you followed instructions from the upgrade packages sections of this document, and you elected to save both the new and old configuration files, the new version of the configuration file is saved in the same directory as the old one with an added extension suffix for both server and agent. These files are stored in the <cite>/etc/scylla-manager</cite> directory.</p>
<p>On a CentOS configuration, a conflict looks like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the ScyllaDB Manager node</span>
/etc/scylla-manager/scylla-manager.yaml<span class="w"> </span><span class="c1"># old file containing custom values</span>
/etc/scylla-manager/scylla-manager.yaml.rpmnew<span class="w"> </span><span class="c1"># new default file from new version</span>
<span class="c1"># On all Scylla nodes</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml<span class="w"> </span><span class="c1"># old file containing custom values</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml.rpmnew<span class="w"> </span><span class="c1"># new default file from new version</span>
</pre></div>
</div>
<p>On an Ubuntu configuration, a conflict looks like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the ScyllaDB Manager node</span>
/etc/scylla-manager/scylla-manager.yaml<span class="w"> </span><span class="c1"># old file containing custom values</span>
/etc/scylla-manager/scylla-manager.yaml.dpkg-dist<span class="w"> </span><span class="c1"># new default file from new version</span>
<span class="c1"># On all ScyllaDB nodes</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml<span class="w"> </span><span class="c1"># old file containing custom values</span>
/etc/scylla-manager-agent/scylla-manager-agent.yaml.dpkg-dist<span class="w"> </span><span class="c1"># new default file from new version</span>
</pre></div>
</div>
<p>It is required to manually inspect both files and reconcile old values with the new configuration. Remember to carry over any custom values like database credentials, backup, repair, and any other configuration. This can be done by manually updating values in the new config file and then renaming files:</p>
<p>For CentOS:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the Scylla Manager node</span>
<span class="nb">cd</span><span class="w"> </span>/etc/scylla-manager/
mv<span class="w"> </span>scylla-manager.yaml<span class="w"> </span>scylla-manager.yaml.old<span class="w">  </span><span class="c1">#renames the old config file as old</span>
mv<span class="w"> </span>scylla-manager.yaml.rpmnew<span class="w"> </span>scylla-manager.yaml
<span class="c1"># On all ScyllaDB nodes</span>
<span class="nb">cd</span><span class="w"> </span>/etc/scylla-manager-agent/
mv<span class="w"> </span>scylla-manager-agent.yaml<span class="w"> </span>scylla-manager-agent.yaml.old
mv<span class="w"> </span>scylla-manager-agent.yaml.rpmnew<span class="w"> </span>scylla-manager-agent.yaml
</pre></div>
</div>
<p>For Ubuntu:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># On the ScyllaDB Manager node</span>
<span class="nb">cd</span><span class="w"> </span>/etc/scylla-manager/
mv<span class="w"> </span>scylla-manager.yaml<span class="w"> </span>scylla-manager.yaml.old
mv<span class="w"> </span>scylla-manager.yaml.dpkg-dist<span class="w"> </span>scylla-manager.yaml
<span class="c1"># On all ScyllaDB nodes</span>
<span class="nb">cd</span><span class="w"> </span>/etc/scylla-manager-agent/
mv<span class="w"> </span>scylla-manager-agent.yaml<span class="w"> </span>scylla-manager-agent.yaml.old
mv<span class="w"> </span>scylla-manager-agent.yaml.dpkg-dist<span class="w"> </span>scylla-manager-agent.yaml
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you plan to use native backup after the upgrade, we recommend <a class="reference internal" href="../backup/native-backup.html#configure-native-backup-in-scylla"><span class="std std-ref">configuring</span></a> it at this point.</p>
</div>
</section>
<section id="start-the-scylladb-manager-agent-on-all-nodes">
<h3>Start the ScyllaDB Manager Agent on all nodes<a class="headerlink" href="#start-the-scylladb-manager-agent-on-all-nodes" title="Link to this heading">¶</a></h3>
<p><strong>On each ScyllaDB node</strong> instruct Systemd to start the agent process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>scylla-manager-agent
</pre></div>
</div>
<p>Ensure that it is running with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>scylla-manager-agent
</pre></div>
</div>
<p>It should have a status of <em>“Active: active (running)”</em>.</p>
</section>
<section id="start-the-scylladb-manager-server">
<h3>Start the ScyllaDB Manager Server<a class="headerlink" href="#start-the-scylladb-manager-server" title="Link to this heading">¶</a></h3>
<p><strong>On the Manager Server</strong> instruct Systemd to start the server process:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>scylla-manager
</pre></div>
</div>
<p>Ensure that it is started with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>scylla-manager
</pre></div>
</div>
<p>It should have a status of <em>“Active: active (running)”</em>.</p>
</section>
<section id="validate-status-of-the-cluster">
<h3>Validate status of the cluster<a class="headerlink" href="#validate-status-of-the-cluster" title="Link to this heading">¶</a></h3>
<p><strong>On the Manager Server</strong> check the version of the client and the server:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool<span class="w"> </span>version
Client<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.x.y-0.20200123.7cf18f6b
Server<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.x.y-0.20200123.7cf18f6b
</pre></div>
</div>
<p>Check that cluster is up:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>sctool<span class="w"> </span>status<span class="w"> </span>-c<span class="w"> </span>&lt;cluster&gt;
</pre></div>
</div>
<p>All running nodes should be up.</p>
</section>
</section>
</section>

                    </div>
                    
                        <div class="post-content">
                            
    <div class="feedback-container">
        <p class="feedback-container__title">Was this page helpful?</p>
        <span data-tooltip tabindex="1" title="Yes" data-position="top">
            <button class="feedback-container__button" id="feedback-positive">
                <i class="feedback-container__icon icon-docs-thumbs-up"></i>
            </button>
        </span>
        <span data-tooltip tabindex="1" title="No" data-position="top">
            <button class="feedback-container__button" id="feedback-negative">
                <i class="feedback-container__icon icon-docs-thumbs-down"></i>
            </button>
        </span>
        <div class="feedback-container__message" id="feedback-message"></div>
    </div>

    <script>
        function resetFeedbackButtonActive() {
            const feedbackButtons = document.getElementsByClassName('feedback-container__button');
            for (let i = 0; i < feedbackButtons.length; i++) {
                feedbackButtons[i].classList.remove('active');
            }
        }

        function showMessage(liked) {
            const feedbackMessage = document.getElementById('feedback-message');
            const themeGithubRepository = true;
            let message = 'Great! Thanks for your feedback.';
            if (themeGithubRepository && !liked) {
                message = "Thanks for your feedback! Please don't hesitate to <a href='https://github.com/scylladb/scylla-manager/issues/new?title=docs:%20Issue on page ScyllaDB Manager Upgrade&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://manager.docs.scylladb.com/branch-3.6/upgrade/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation'>create an issue</a> if you have any suggestions on how we can improve.";
            }
            feedbackMessage.innerHTML = message;
        }

        function sendGaEvent(liked) {
            const event_label = liked ? "positive" : "negative";
            const event = "feedback_" + event_label;
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': event,
            });
        }

        const positiveFeebackButton = document.getElementById('feedback-positive');
        const negativeFeedbackButton = document.getElementById('feedback-negative');

        positiveFeebackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(true);
            showMessage(true);
            positiveFeebackButton.classList.add('active');
        });

        negativeFeedbackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(false);
            showMessage(false);
            negativeFeedbackButton.classList.add('active');
        });
    </script>

                            <div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="../install-scylla-manager-agent.html">
                <button class="navigation__button">
                    <i class="icon-chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Install ScyllaDB Manager Agent
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="../compatibility-matrix.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Compatibility Matrix
                </div>
                <button class="navigation__button">
                    <i class="icon-chevron-right"></i>
                </button>
            </a>
        
    </div>
</div>
                            <!-- Post content text -->
                        </div>
                    
                
                
                    </div>
                        <div class="sidebar-right large-order-3">
                            <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a class="button button-sm" href="https://github.com/scylladb/scylla-manager/issues/new?title=docs:%20Issue on page ScyllaDB Manager Upgrade&&body=I%20would%20like%20to%20report%20an%20issue%20on%20page%20https://manager.docs.scylladb.com/branch-3.6/upgrade/index%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation"
               target="_blank">
                <i class="icon-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                <a class="button button-sm" href="https://github.com/scylladb/scylla-manager/edit/master/docs/source/upgrade/index.rst"
                   target="_blank">
                    <i class="icon-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">ScyllaDB Manager Upgrade</a><ul>
<li><a class="reference internal" href="#applicable-platforms">Applicable platforms</a></li>
<li><a class="reference internal" href="#upgrade-procedure">Upgrade Procedure</a></li>
<li><a class="reference internal" href="#upgrade-steps">Upgrade steps</a><ul>
<li><a class="reference internal" href="#stop-all-scylladb-manager-tasks-or-wait-for-them-to-finish">Stop all ScyllaDB Manager tasks (or wait for them to finish)</a></li>
<li><a class="reference internal" href="#stop-the-scylladb-manager-server">Stop the ScyllaDB Manager Server</a></li>
<li><a class="reference internal" href="#stop-the-scylladb-manager-agent-on-all-nodes">Stop the ScyllaDB Manager Agent on all nodes</a></li>
<li><a class="reference internal" href="#upgrade-the-scylladb-manager-server-and-client">Upgrade the ScyllaDB Manager Server and Client</a></li>
<li><a class="reference internal" href="#upgrade-the-scylladb-manager-agent-on-all-nodes">Upgrade the ScyllaDB Manager Agent on all nodes</a></li>
<li><a class="reference internal" href="#run-scyllamgr-agent-setup-script-on-all-nodes">Run <cite>scyllamgr_agent_setup</cite> script on all nodes</a></li>
<li><a class="reference internal" href="#reconcile-configuration-files">Reconcile configuration files</a></li>
<li><a class="reference internal" href="#start-the-scylladb-manager-agent-on-all-nodes">Start the ScyllaDB Manager Agent on all nodes</a></li>
<li><a class="reference internal" href="#start-the-scylladb-manager-server">Start the ScyllaDB Manager Server</a></li>
<li><a class="reference internal" href="#validate-status-of-the-cluster">Validate status of the cluster</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    
</div>
                        </div>
                    </div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="icon-docs-menu-collapse"></i>
    </button>
    <div class="side-nav-content custom-scroll-bar">
        <div class="side-nav__title">
            <a href="../index.html">Scylla Manager</a>
        </div>
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions"><ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
    <li class="scylla-dropdown__item">
        <a class="scylla-dropdown__title" href="#">
            
                3.6
            
            <i class="chevron icon-docs-chevron-right"></i>
        </a>
        <ul class="menu scylla-dropdown__content">
            
                
                    <li>
                        <a href="../../master/upgrade/index.html">master</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../stable/upgrade/index.html">3.7</a>
                    </li>
                
            
                
                    <li>
                        <a href="index.html">3.6</a>
                    </li>
                
            
                
                    <li>
                        <a href="../../branch-3.5/upgrade/index.html">3.5</a>
                    </li>
                
            
            
        </ul>
    </li>
</ul></div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install-scylla-manager.html">Install ScyllaDB Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install-scylla-manager-agent.html">Install ScyllaDB Manager Agent</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">ScyllaDB Manager Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compatibility-matrix.html">Compatibility Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add-a-cluster.html">Add a Cluster</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../backup/index.html">Backup</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../backup/setup-amazon-s3.html">Setup Amazon S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup/setup-s3-compatible-storage.html">Setup S3 compatible storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup/setup-gcs.html">Setup Google Cloud Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup/setup-azure-blobstorage.html">Setup Azure Blob Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup/native-backup.html">Native Backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup/examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup/specification.html">Specification</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../restore/index.html">Restore</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../restore/restore-tables.html">Restore tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../restore/restore-schema.html">Restore schema for ScyllaDB 6.0/2024.2 or newer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../restore/old-restore-schema.html">Restore schema for ScyllaDB 5.4/2024.1 or older</a></li>
<li class="toctree-l2"><a class="reference internal" href="../restore/examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../repair/index.html">Repair</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../repair/repair-faster.html">Repair faster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../repair/repair-slower.html">Repair slower</a></li>
<li class="toctree-l2"><a class="reference internal" href="../repair/examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../health-check.html">Health Check</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sctool/index.html">CLI sctool</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../sctool/global-flags-and-variables.html">Environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/completion.html">Completion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/download-files.html">Download files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/backup.html">Backup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/restore.html">Restore</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/cluster.html">Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/info.html">Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/progress.html">Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/repair.html">Repair</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/start.html">Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/status.html">Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/stop.html">Stop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/suspend-resume.html">Suspend &amp; Resume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/task.html">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sctool/version.html">Version</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../config/index.html">Configuration Files</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon-chevron-right"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../config/scylla-manager-config.html">Scylla Manager Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config/scylla-manager-agent-config.html">Scylla Manager Agent Config</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../swagger/index.html">Swagger File</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scylla-monitoring.html">ScyllaDB Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference external" href="https://scylladb-users.slack.com/archives/C01ERVBPWLU">Slack</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com"></a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/" target="_blank">Docs</a>
                <a class="footer-links__link" href="https://docs.scylladb.com/stable/get-started/develop-with-scylladb/tutorials-example-projects.html" target="_blank">Tutorials</a>
                <a class="footer-links__link" href="https://university.scylladb.com/" target="_blank">University</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/"
                    target="_blank">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/" target="_blank">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <i class="icon-slack"></i>
                    </span>
                </a>
                <a class="footer-actions__link" href="https://forum.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="Community forum" data-position="bottom">
                        <i class="icon-docs-community"></i>
                    </span>
                </a>
            </div>
        </div>

        
        <div class="footer-copyright">
            
                
                    &#169; 2025, ScyllaDB. All rights reserved.
                
                | <a class="footer-copyright__link" href="https://www.scylladb.com/tos/" target="_blank">Terms of Service</a>
                | <a class="footer-copyright__link" href="https://www.scylladb.com/privacy/" target="_blank">Privacy Policy</a>
                | ScyllaDB, and ScyllaDB Cloud, are registered trademarks of ScyllaDB, Inc.
            
        </div>
    


        <div class="footer-bottom">
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 28 October 2025.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a class="footer-bottom__link" href="http://sphinx-doc.org/">Sphinx 7.4.7</a> &amp;
                <a class="footer-bottom__link" href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.8.8</a>
            </div>
        </div>
    </div>
    
        <biel-button class="footer-ask-ai" project="ddfdo8m94k" 
            header-title="ScyllaDB chatbot (beta)"
            button-position="bottom-right"
            modal-position="bottom-right"
            button-style="dark">
            Ask AI
        </biel-button>
    
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                    style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>